{"ast":null,"code":"import apiRoutes from \"../config/apiRoutes\";\nexport const refreshToken = async () => {\n  const refresh = localStorage.getItem(\"refreshToken\");\n  if (!refresh) return null;\n  const res = await fetch(apiRoutes.auths.refresh, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      refreshToken: refresh\n    })\n  });\n  if (!res.ok) {\n    localStorage.clear(); // optional: force logout\n    return null;\n  }\n  const data = await res.json();\n  localStorage.setItem(\"authToken\", data.token);\n  localStorage.setItem(\"refreshToken\", data.refreshToken);\n  return data.token;\n};","map":{"version":3,"names":["apiRoutes","refreshToken","refresh","localStorage","getItem","res","fetch","auths","method","headers","body","JSON","stringify","ok","clear","data","json","setItem","token"],"sources":["C:/Users/User/Documents/GitHub/ccv-movie-frontend/src/services/tokenService.ts"],"sourcesContent":["import apiRoutes from \"../config/apiRoutes\";\r\n\r\nexport const refreshToken = async () => {\r\n    const refresh = localStorage.getItem(\"refreshToken\");\r\n    if (!refresh) return null;\r\n\r\n    const res = await fetch(apiRoutes.auths.refresh, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ refreshToken: refresh }),\r\n    });\r\n\r\n    if (!res.ok) {\r\n        localStorage.clear(); // optional: force logout\r\n        return null;\r\n    }\r\n\r\n    const data = await res.json();\r\n    localStorage.setItem(\"authToken\", data.token);\r\n    localStorage.setItem(\"refreshToken\", data.refreshToken);\r\n    return data.token;\r\n};\r\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,qBAAqB;AAE3C,OAAO,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;EACpC,MAAMC,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;EACpD,IAAI,CAACF,OAAO,EAAE,OAAO,IAAI;EAEzB,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAACN,SAAS,CAACO,KAAK,CAACL,OAAO,EAAE;IAC7CM,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEX,YAAY,EAAEC;IAAQ,CAAC;EAClD,CAAC,CAAC;EAEF,IAAI,CAACG,GAAG,CAACQ,EAAE,EAAE;IACTV,YAAY,CAACW,KAAK,CAAC,CAAC,CAAC,CAAC;IACtB,OAAO,IAAI;EACf;EAEA,MAAMC,IAAI,GAAG,MAAMV,GAAG,CAACW,IAAI,CAAC,CAAC;EAC7Bb,YAAY,CAACc,OAAO,CAAC,WAAW,EAAEF,IAAI,CAACG,KAAK,CAAC;EAC7Cf,YAAY,CAACc,OAAO,CAAC,cAAc,EAAEF,IAAI,CAACd,YAAY,CAAC;EACvD,OAAOc,IAAI,CAACG,KAAK;AACrB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}