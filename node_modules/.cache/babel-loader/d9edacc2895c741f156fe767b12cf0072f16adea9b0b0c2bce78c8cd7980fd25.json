{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\ccv-movie-frontend\\\\src\\\\users\\\\pages\\\\SeatBookingPage.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport Navbar from \"../../components/Navbar\";\nimport Footer from \"../../components/Footer\";\nimport Seat from \"../../components/Seat\";\nimport SeatLegend from \"../../components/SeatLegend\";\nimport TicketPopup from \"../../components/TicketPopup\";\nimport Timeout_Popup from \"../../components/Timeout_Popup\";\nimport { getScreeningById } from \"../../services/screeningService\";\nimport { getMovieById } from \"../../services/movieService\";\nimport { getCinemaById } from \"../../services/cinemaService\";\nimport { bookSeats } from \"../../services/bookingService\";\nimport \"../styles/seat_booking.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SeatBookingPage = () => {\n  _s();\n  const {\n    screeningId\n  } = useParams();\n  const navigate = useNavigate();\n  const [screening, setScreening] = useState(null);\n  const [movie, setMovie] = useState(null);\n  const [cinema, setCinema] = useState(null);\n  const [room, setRoom] = useState(null);\n  const [selectedSeats, setSelectedSeats] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showTicketPopup, setShowTicketPopup] = useState(false);\n  const [showTimeoutPopup, setShowTimeoutPopup] = useState(false);\n  const [timeLeft, setTimeLeft] = useState(600); // 10 minutes in seconds\n  const [animateContent, setAnimateContent] = useState(false);\n\n  // Seat types and prices (this would ideally come from the API)\n  const seatTypes = {\n    standard: {\n      name: \"Standard\",\n      price: 15\n    },\n    premium: {\n      name: \"Premium\",\n      price: 20\n    },\n    vip: {\n      name: \"VIP\",\n      price: 25\n    },\n    couple: {\n      name: \"Couple\",\n      price: 40\n    }\n  };\n  useEffect(() => {\n    const fetchBookingData = async () => {\n      if (!screeningId) return;\n      try {\n        setLoading(true);\n\n        // Fetch screening data\n        const screeningResult = await getScreeningById(screeningId);\n        if (!screeningResult.success || !screeningResult.data) {\n          setError(screeningResult.message || \"Failed to load screening details\");\n          return;\n        }\n        const screeningData = screeningResult.data;\n        setScreening(screeningData);\n\n        // Fetch movie data\n        const movieResult = await getMovieById(screeningData.movieId);\n        if (movieResult.success && movieResult.data) {\n          setMovie(movieResult.data);\n        }\n\n        // Fetch cinema and room data\n        const cinemaResult = await getCinemaById(screeningData.cinemaId);\n        if (cinemaResult.success && cinemaResult.data) {\n          setCinema(cinemaResult.data);\n\n          // Find the room for this screening\n          const roomData = cinemaResult.data.rooms.find(r => r.roomId === screeningData.roomId);\n          if (roomData) {\n            setRoom(roomData);\n          }\n        }\n      } catch (err) {\n        setError(\"An error occurred while fetching booking details\");\n        console.error(err);\n      } finally {\n        setLoading(false);\n        // Trigger animation after data is loaded\n        setTimeout(() => {\n          setAnimateContent(true);\n        }, 100);\n      }\n    };\n    fetchBookingData();\n\n    // Start the countdown timer\n    const timer = setInterval(() => {\n      setTimeLeft(prev => {\n        if (prev <= 1) {\n          clearInterval(timer);\n          setShowTimeoutPopup(true);\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [screeningId]);\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs < 10 ? \"0\" : \"\"}${secs}`;\n  };\n  const handleSeatClick = seat => {\n    // Check if seat is already booked\n    if (seat.isBooked) return;\n\n    // Check if seat is already selected\n    const isSelected = selectedSeats.some(s => s.seatId === seat.seatId);\n    if (isSelected) {\n      // Remove seat from selection\n      setSelectedSeats(selectedSeats.filter(s => s.seatId !== seat.seatId));\n    } else {\n      // Add seat to selection\n      setSelectedSeats([...selectedSeats, seat]);\n    }\n  };\n  const calculateTotal = () => {\n    return selectedSeats.reduce((total, seat) => {\n      var _seatTypes$seatType;\n      const seatType = seat.type.toLowerCase();\n      return total + (((_seatTypes$seatType = seatTypes[seatType]) === null || _seatTypes$seatType === void 0 ? void 0 : _seatTypes$seatType.price) || seatTypes.standard.price);\n    }, 0);\n  };\n  const handleProceedToCheckout = async () => {\n    if (selectedSeats.length === 0) return;\n    try {\n      if (!screening) return;\n      const result = await bookSeats(screening.screeningId, selectedSeats.map(seat => seat.seatId));\n      if (result.success) {\n        setShowTicketPopup(true);\n      } else {\n        setError(result.message || \"Failed to book seats\");\n      }\n    } catch (err) {\n      setError(\"An error occurred during booking\");\n      console.error(err);\n    }\n  };\n  const handleCloseTicketPopup = () => {\n    setShowTicketPopup(false);\n    navigate(\"/\");\n  };\n  const handleCloseTimeoutPopup = () => {\n    setShowTimeoutPopup(false);\n    navigate(\"/movies\");\n  };\n  const getSeatTypePrice = type => {\n    var _seatTypes$seatType2;\n    const seatType = type.toLowerCase();\n    return ((_seatTypes$seatType2 = seatTypes[seatType]) === null || _seatTypes$seatType2 === void 0 ? void 0 : _seatTypes$seatType2.price) || seatTypes.standard.price;\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-screen\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loader\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this);\n  }\n  if (error || !screening || !movie || !cinema || !room) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error || \"Booking information not found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(\"/movies\"),\n        className: \"back-button\",\n        children: \"Back to Movies\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"seat-booking-page\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booking-header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"booking-timer\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"timer-icon\",\n          children: \"\\u23F1\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `timer-text ${timeLeft < 60 ? \"expiring\" : \"\"}`,\n          children: [\"Session expires in: \", formatTime(timeLeft)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booking-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `booking-info-sidebar ${animateContent ? \"animate\" : \"\"}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"movie-summary\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"movie-poster\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: movie.image || \"/placeholder.svg\",\n              alt: movie.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"movie-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: movie.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"movie-meta\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: movie.genre\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"meta-divider\",\n                children: \"\\u2022\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: movie.duration\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"screening-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"detail-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detail-icon\",\n                  children: \"\\uD83D\\uDCC5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: new Date(screening.date).toLocaleDateString(\"en-US\", {\n                    weekday: \"long\",\n                    month: \"long\",\n                    day: \"numeric\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"detail-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detail-icon\",\n                  children: \"\\u23F0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: screening.time\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"detail-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detail-icon\",\n                  children: \"\\uD83C\\uDFE2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: cinema.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"detail-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detail-icon\",\n                  children: \"\\uD83C\\uDFA6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"Hall \", room.name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"booking-summary\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Booking Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), selectedSeats.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-seats-list\",\n              children: selectedSeats.map(seat => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"selected-seat-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"seat-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"seat-label\",\n                    children: [seat.row, seat.number]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"seat-type\",\n                    children: seat.type\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"seat-price\",\n                  children: [\"$\", getSeatTypePrice(seat.type).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 23\n                }, this)]\n              }, seat.seatId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"booking-totals\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"subtotal-line\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Subtotal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"$\", calculateTotal().toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"fee-line\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Booking Fee\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"$1.50\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"total-line\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"$\", (calculateTotal() + 1.5).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"checkout-button\",\n              onClick: handleProceedToCheckout,\n              disabled: selectedSeats.length === 0,\n              children: \"Proceed to Checkout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-seats-selected\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Please select your seats\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `seating-container ${animateContent ? \"animate\" : \"\"}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"screen-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"screen\",\n            children: \"Screen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"seats-container\",\n          children: room.layout.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"seat-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row-label\",\n              children: row.row\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"seats\",\n              children: row.seats.map(seat => /*#__PURE__*/_jsxDEV(Seat, {\n                seat: seat,\n                isSelected: selectedSeats.some(s => s.seatId === seat.seatId),\n                onClick: () => handleSeatClick(seat)\n              }, seat.seatId, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row-label\",\n              children: row.row\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 17\n            }, this)]\n          }, rowIndex, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SeatLegend, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), showTicketPopup && /*#__PURE__*/_jsxDEV(TicketPopup, {\n      movie: movie,\n      cinema: cinema,\n      screening: screening,\n      seats: selectedSeats,\n      onClose: handleCloseTicketPopup\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 9\n    }, this), showTimeoutPopup && /*#__PURE__*/_jsxDEV(Timeout_Popup, {\n      onClose: handleCloseTimeoutPopup\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 5\n  }, this);\n};\n_s(SeatBookingPage, \"C9O9qbrogLIKGtjwDinW8ktBkPc=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = SeatBookingPage;\nexport default SeatBookingPage;\nvar _c;\n$RefreshReg$(_c, \"SeatBookingPage\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","useParams","useNavigate","Navbar","Footer","Seat","SeatLegend","TicketPopup","Timeout_Popup","getScreeningById","getMovieById","getCinemaById","bookSeats","jsxDEV","_jsxDEV","Fragment","_Fragment","SeatBookingPage","screeningId","navigate","screening","setScreening","movie","setMovie","cinema","setCinema","room","setRoom","selectedSeats","setSelectedSeats","loading","setLoading","error","setError","showTicketPopup","setShowTicketPopup","showTimeoutPopup","setShowTimeoutPopup","timeLeft","setTimeLeft","animateContent","setAnimateContent","seatTypes","standard","name","price","premium","vip","couple","fetchBookingData","screeningResult","success","data","message","screeningData","movieResult","movieId","cinemaResult","cinemaId","roomData","rooms","find","r","roomId","err","console","setTimeout","timer","setInterval","prev","clearInterval","formatTime","seconds","mins","Math","floor","secs","handleSeatClick","seat","isBooked","isSelected","some","s","seatId","filter","calculateTotal","reduce","total","_seatTypes$seatType","seatType","type","toLowerCase","handleProceedToCheckout","length","result","map","handleCloseTicketPopup","handleCloseTimeoutPopup","getSeatTypePrice","_seatTypes$seatType2","className","children","fileName","lineNumber","columnNumber","onClick","src","image","alt","title","genre","duration","Date","date","toLocaleDateString","weekday","month","day","time","row","number","toFixed","disabled","layout","rowIndex","seats","onClose","_c","$RefreshReg$"],"sources":["C:/Users/User/Documents/GitHub/ccv-movie-frontend/src/users/pages/SeatBookingPage.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { useParams, useNavigate } from \"react-router-dom\"\r\nimport Navbar from \"../../components/Navbar\"\r\nimport Footer from \"../../components/Footer\"\r\nimport Seat from \"../../components/Seat\"\r\nimport SeatLegend from \"../../components/SeatLegend\"\r\nimport TicketPopup from \"../../components/TicketPopup\"\r\nimport Timeout_Popup from \"../../components/Timeout_Popup\"\r\nimport { getScreeningById } from \"../../services/screeningService\"\r\nimport { getMovieById } from \"../../services/movieService\"\r\nimport { getCinemaById } from \"../../services/cinemaService\"\r\nimport { bookSeats } from \"../../services/bookingService\"\r\nimport type { ScreeningProps } from \"../../interfaces/screenings\"\r\nimport type { MovieProps } from \"../../interfaces/movies\"\r\nimport type { CinemaProps, RoomProps } from \"../../interfaces/cinemas\"\r\nimport type { SeatProps } from \"../../interfaces/seats\"\r\nimport \"../styles/seat_booking.css\"\r\n\r\nconst SeatBookingPage: React.FC = () => {\r\n  const { screeningId } = useParams<{ screeningId: string }>()\r\n  const navigate = useNavigate()\r\n\r\n  const [screening, setScreening] = useState<ScreeningProps | null>(null)\r\n  const [movie, setMovie] = useState<MovieProps | null>(null)\r\n  const [cinema, setCinema] = useState<CinemaProps | null>(null)\r\n  const [room, setRoom] = useState<RoomProps | null>(null)\r\n  const [selectedSeats, setSelectedSeats] = useState<SeatProps[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [showTicketPopup, setShowTicketPopup] = useState(false)\r\n  const [showTimeoutPopup, setShowTimeoutPopup] = useState(false)\r\n  const [timeLeft, setTimeLeft] = useState(600) // 10 minutes in seconds\r\n  const [animateContent, setAnimateContent] = useState(false)\r\n\r\n  // Seat types and prices (this would ideally come from the API)\r\n  const seatTypes = {\r\n    standard: { name: \"Standard\", price: 15 },\r\n    premium: { name: \"Premium\", price: 20 },\r\n    vip: { name: \"VIP\", price: 25 },\r\n    couple: { name: \"Couple\", price: 40 },\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchBookingData = async () => {\r\n      if (!screeningId) return\r\n\r\n      try {\r\n        setLoading(true)\r\n\r\n        // Fetch screening data\r\n        const screeningResult = await getScreeningById(screeningId)\r\n        if (!screeningResult.success || !screeningResult.data) {\r\n          setError(screeningResult.message || \"Failed to load screening details\")\r\n          return\r\n        }\r\n\r\n        const screeningData = screeningResult.data\r\n        setScreening(screeningData)\r\n\r\n        // Fetch movie data\r\n        const movieResult = await getMovieById(screeningData.movieId)\r\n        if (movieResult.success && movieResult.data) {\r\n          setMovie(movieResult.data)\r\n        }\r\n\r\n        // Fetch cinema and room data\r\n        const cinemaResult = await getCinemaById(screeningData.cinemaId)\r\n        if (cinemaResult.success && cinemaResult.data) {\r\n          setCinema(cinemaResult.data)\r\n\r\n          // Find the room for this screening\r\n          const roomData = cinemaResult.data.rooms.find((r) => r.roomId === screeningData.roomId)\r\n          if (roomData) {\r\n            setRoom(roomData)\r\n          }\r\n        }\r\n      } catch (err) {\r\n        setError(\"An error occurred while fetching booking details\")\r\n        console.error(err)\r\n      } finally {\r\n        setLoading(false)\r\n        // Trigger animation after data is loaded\r\n        setTimeout(() => {\r\n          setAnimateContent(true)\r\n        }, 100)\r\n      }\r\n    }\r\n\r\n    fetchBookingData()\r\n\r\n    // Start the countdown timer\r\n    const timer = setInterval(() => {\r\n      setTimeLeft((prev) => {\r\n        if (prev <= 1) {\r\n          clearInterval(timer)\r\n          setShowTimeoutPopup(true)\r\n          return 0\r\n        }\r\n        return prev - 1\r\n      })\r\n    }, 1000)\r\n\r\n    return () => clearInterval(timer)\r\n  }, [screeningId])\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60)\r\n    const secs = seconds % 60\r\n    return `${mins}:${secs < 10 ? \"0\" : \"\"}${secs}`\r\n  }\r\n\r\n  const handleSeatClick = (seat: SeatProps) => {\r\n    // Check if seat is already booked\r\n    if (seat.isBooked) return\r\n\r\n    // Check if seat is already selected\r\n    const isSelected = selectedSeats.some((s) => s.seatId === seat.seatId)\r\n\r\n    if (isSelected) {\r\n      // Remove seat from selection\r\n      setSelectedSeats(selectedSeats.filter((s) => s.seatId !== seat.seatId))\r\n    } else {\r\n      // Add seat to selection\r\n      setSelectedSeats([...selectedSeats, seat])\r\n    }\r\n  }\r\n\r\n  const calculateTotal = () => {\r\n    return selectedSeats.reduce((total, seat) => {\r\n      const seatType = seat.type.toLowerCase() as keyof typeof seatTypes\r\n      return total + (seatTypes[seatType]?.price || seatTypes.standard.price)\r\n    }, 0)\r\n  }\r\n\r\n  const handleProceedToCheckout = async () => {\r\n    if (selectedSeats.length === 0) return\r\n\r\n    try {\r\n      if (!screening) return\r\n\r\n      const result = await bookSeats(\r\n        screening.screeningId,\r\n        selectedSeats.map((seat) => seat.seatId),\r\n      )\r\n\r\n      if (result.success) {\r\n        setShowTicketPopup(true)\r\n      } else {\r\n        setError(result.message || \"Failed to book seats\")\r\n      }\r\n    } catch (err) {\r\n      setError(\"An error occurred during booking\")\r\n      console.error(err)\r\n    }\r\n  }\r\n\r\n  const handleCloseTicketPopup = () => {\r\n    setShowTicketPopup(false)\r\n    navigate(\"/\")\r\n  }\r\n\r\n  const handleCloseTimeoutPopup = () => {\r\n    setShowTimeoutPopup(false)\r\n    navigate(\"/movies\")\r\n  }\r\n\r\n  const getSeatTypePrice = (type: string) => {\r\n    const seatType = type.toLowerCase() as keyof typeof seatTypes\r\n    return seatTypes[seatType]?.price || seatTypes.standard.price\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-screen\">\r\n        <div className=\"loader\"></div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error || !screening || !movie || !cinema || !room) {\r\n    return (\r\n      <div className=\"error-container\">\r\n        <h2>Error</h2>\r\n        <p>{error || \"Booking information not found\"}</p>\r\n        <button onClick={() => navigate(\"/movies\")} className=\"back-button\">\r\n          Back to Movies\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"seat-booking-page\">\r\n      <Navbar />\r\n\r\n      <div className=\"booking-header\">\r\n        <div className=\"booking-timer\">\r\n          <span className=\"timer-icon\">⏱️</span>\r\n          <span className={`timer-text ${timeLeft < 60 ? \"expiring\" : \"\"}`}>\r\n            Session expires in: {formatTime(timeLeft)}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"booking-content\">\r\n        <div className={`booking-info-sidebar ${animateContent ? \"animate\" : \"\"}`}>\r\n          <div className=\"movie-summary\">\r\n            <div className=\"movie-poster\">\r\n              <img src={movie.image || \"/placeholder.svg\"} alt={movie.title} />\r\n            </div>\r\n            <div className=\"movie-details\">\r\n              <h1>{movie.title}</h1>\r\n              <div className=\"movie-meta\">\r\n                <span>{movie.genre}</span>\r\n                <span className=\"meta-divider\">•</span>\r\n                <span>{movie.duration}</span>\r\n              </div>\r\n              <div className=\"screening-details\">\r\n                <div className=\"detail-item\">\r\n                  <span className=\"detail-icon\">📅</span>\r\n                  <span>\r\n                    {new Date(screening.date).toLocaleDateString(\"en-US\", {\r\n                      weekday: \"long\",\r\n                      month: \"long\",\r\n                      day: \"numeric\",\r\n                    })}\r\n                  </span>\r\n                </div>\r\n                <div className=\"detail-item\">\r\n                  <span className=\"detail-icon\">⏰</span>\r\n                  <span>{screening.time}</span>\r\n                </div>\r\n                <div className=\"detail-item\">\r\n                  <span className=\"detail-icon\">🏢</span>\r\n                  <span>{cinema.name}</span>\r\n                </div>\r\n                <div className=\"detail-item\">\r\n                  <span className=\"detail-icon\">🎦</span>\r\n                  <span>Hall {room.name}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"booking-summary\">\r\n            <h2>Booking Summary</h2>\r\n\r\n            {selectedSeats.length > 0 ? (\r\n              <>\r\n                <div className=\"selected-seats-list\">\r\n                  {selectedSeats.map((seat) => (\r\n                    <div className=\"selected-seat-item\" key={seat.seatId}>\r\n                      <div className=\"seat-info\">\r\n                        <span className=\"seat-label\">\r\n                          {seat.row}\r\n                          {seat.number}\r\n                        </span>\r\n                        <span className=\"seat-type\">{seat.type}</span>\r\n                      </div>\r\n                      <span className=\"seat-price\">${getSeatTypePrice(seat.type).toFixed(2)}</span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                <div className=\"booking-totals\">\r\n                  <div className=\"subtotal-line\">\r\n                    <span>Subtotal</span>\r\n                    <span>${calculateTotal().toFixed(2)}</span>\r\n                  </div>\r\n                  <div className=\"fee-line\">\r\n                    <span>Booking Fee</span>\r\n                    <span>$1.50</span>\r\n                  </div>\r\n                  <div className=\"total-line\">\r\n                    <span>Total</span>\r\n                    <span>${(calculateTotal() + 1.5).toFixed(2)}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <button\r\n                  className=\"checkout-button\"\r\n                  onClick={handleProceedToCheckout}\r\n                  disabled={selectedSeats.length === 0}\r\n                >\r\n                  Proceed to Checkout\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <div className=\"no-seats-selected\">\r\n                <p>Please select your seats</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`seating-container ${animateContent ? \"animate\" : \"\"}`}>\r\n          <div className=\"screen-container\">\r\n            <div className=\"screen\">Screen</div>\r\n          </div>\r\n\r\n          <div className=\"seats-container\">\r\n            {room.layout.map((row, rowIndex) => (\r\n              <div className=\"seat-row\" key={rowIndex}>\r\n                <div className=\"row-label\">{row.row}</div>\r\n                <div className=\"seats\">\r\n                  {row.seats.map((seat) => (\r\n                    <Seat\r\n                      key={seat.seatId}\r\n                      seat={seat}\r\n                      isSelected={selectedSeats.some((s) => s.seatId === seat.seatId)}\r\n                      onClick={() => handleSeatClick(seat)}\r\n                    />\r\n                  ))}\r\n                </div>\r\n                <div className=\"row-label\">{row.row}</div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <SeatLegend />\r\n        </div>\r\n      </div>\r\n\r\n      {showTicketPopup && (\r\n        <TicketPopup\r\n          movie={movie}\r\n          cinema={cinema}\r\n          screening={screening}\r\n          seats={selectedSeats}\r\n          onClose={handleCloseTicketPopup}\r\n        />\r\n      )}\r\n\r\n      {showTimeoutPopup && <Timeout_Popup onClose={handleCloseTimeoutPopup} />}\r\n\r\n      <Footer />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SeatBookingPage\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}